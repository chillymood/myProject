{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\chill\\\\OneDrive\\\\\\u684C\\u9762\\\\Project\\\\myapp\\\\src\\\\common\\\\Header\\\\index.js\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { CSSTransition } from \"react-transition-group\";\nimport { actionCreators as loginActionCreators } from \"../../pages/login/store\";\nimport { HeaderWrapper, Logo, Nav, NavItem, NavSearch, Addition, Button, SearchWrapper, SearchInfo, SearchInfoTitle, SearchInfoSwitch, SearchInfoList, SearchInfoItem } from \"./style\";\nimport { actionCreator } from \"./store\";\nimport { Link } from \"react-router-dom\";\n\nclass Header extends Component {\n  getSearchInfo(show) {\n    const {\n      list,\n      focused,\n      page,\n      totalPage,\n      mouseIn,\n      handleMouseEnter,\n      handleMouseLeave,\n      handleChangePage\n    } = this.props;\n    const newList = list.toJS();\n    const pageList = [];\n\n    for (let i = (page - 1) * 10; i < page * 10; i++) {\n      pageList.push( /*#__PURE__*/React.createElement(SearchInfoItem, {\n        key: [i],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 21\n        }\n      }, newList[i]));\n    }\n\n    if (focused || mouseIn) {\n      return /*#__PURE__*/React.createElement(SearchInfo, {\n        onMouseEnter: handleMouseEnter,\n        onMouseLeave: handleMouseLeave,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(SearchInfoTitle, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 11\n        }\n      }, \"\\u71B1\\u9580\\u641C\\u7D22\", /*#__PURE__*/React.createElement(SearchInfoSwitch, {\n        onClick: () => handleChangePage(page, totalPage, this.spinIcon),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        ref: icon => {\n          this.spinIcon = icon;\n        },\n        className: \"iconfont spin\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 15\n        }\n      }, \"\\uE851\"), \"\\u63DB\\u4E00\\u6279\")), /*#__PURE__*/React.createElement(SearchInfoList, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }\n      }, pageList));\n    } else return null;\n  }\n\n  render() {\n    const {\n      focused,\n      handleInputFocus,\n      handleInputBlur,\n      list,\n      login,\n      logOut,\n      account,\n      lookSelfArticle,\n      lookAllArticle\n    } = this.props;\n    return /*#__PURE__*/React.createElement(HeaderWrapper, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Nav, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(NavItem, {\n      className: \"left active\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 13\n      }\n    }, \"\\u9996\\u9801\")), /*#__PURE__*/React.createElement(Link, {\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(NavItem, {\n      className: \"left\",\n      onClick: lookAllArticle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 13\n      }\n    }, \"\\u5168\\u90E8\\u6587\\u7AE0\")), login ? /*#__PURE__*/React.createElement(Link, {\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(NavItem, {\n      className: \"left\",\n      onClick: lookSelfArticle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 15\n      }\n    }, account + \"的文章\")) : /*#__PURE__*/React.createElement(NavItem, {\n      className: \"left nopoint\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 13\n      }\n    }, \"\\u8ACB\\u5148\\u767B\\u5165\"), /*#__PURE__*/React.createElement(NavItem, {\n      className: \"right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(SearchWrapper, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(CSSTransition, {\n      in: focused,\n      timeout: 200,\n      classNames: \"slide\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(NavSearch, {\n      className: focused ? \"focused\" : \"\",\n      onFocus: () => handleInputFocus(list),\n      onBlur: handleInputBlur,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      className: focused ? \"iconfont focused zoom\" : \"iconfont zoom\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 13\n      }\n    }, \"\\uE721\"), this.getSearchInfo(focused))), /*#__PURE__*/React.createElement(Addition, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/register\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      className: \"reg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 13\n      }\n    }, \"\\u8A3B\\u518A\")), login ? /*#__PURE__*/React.createElement(Button, {\n      className: \"reg\",\n      onClick: logOut,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 13\n      }\n    }, \"\\u9000\\u51FA\") : /*#__PURE__*/React.createElement(Link, {\n      to: \"/login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      className: \"reg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"iconfont\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 17\n      }\n    }, \"\\uE636\"), \"\\u767B\\u5165\")), /*#__PURE__*/React.createElement(Link, {\n      to: \"/write\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      className: \"writting\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"iconfont\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 15\n      }\n    }, \"\\uE624\"), \"\\u5BEB\\u6587\\u7AE0\"))));\n  }\n\n} //將取到的state值映射到props\n\n\nconst mapStateToProps = state => {\n  return {\n    focused: state.getIn([\"header\", \"focused\"]),\n    list: state.getIn([\"header\", \"list\"]),\n    page: state.getIn([\"header\", \"page\"]),\n    mouseIn: state.getIn([\"header\", \"mouseIn\"]),\n    totalPage: state.getIn([\"header\", \"totalPage\"]),\n    login: state.getIn([\"login\", \"login\"]),\n    account: state.getIn([\"login\", \"account\"])\n  };\n}; //使prop中的方法能調用dispatch\n\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    handleInputFocus(list) {\n      list.size === 0 && dispatch(actionCreator.getheaderList());\n      dispatch(actionCreator.searchFocus());\n    },\n\n    handleInputBlur() {\n      dispatch(actionCreator.searchBlur());\n    },\n\n    handleMouseEnter() {\n      dispatch(actionCreator.mouseEnter());\n    },\n\n    handleMouseLeave() {\n      dispatch(actionCreator.mouseLeave());\n    },\n\n    handleChangePage(page, totalPage, spin) {\n      let originAngle = spin.style.transform.replace(/[^0-9]/gi, \"\");\n      console.log(originAngle);\n\n      if (originAngle) {\n        originAngle = parseInt(originAngle, 10);\n      } else {\n        originAngle = 0;\n      }\n\n      spin.style.transform = \"rotate(\" + (originAngle + 360) + \"deg)\";\n\n      if (page < totalPage) {\n        dispatch(actionCreator.changePage(page + 1));\n      } else {\n        dispatch(actionCreator.changePage(1));\n      }\n    },\n\n    logOut() {\n      //引用他處的actionCreacter\n      dispatch(loginActionCreators.logOut());\n    },\n\n    lookSelfArticle() {\n      dispatch(actionCreator.lookSelfArticle());\n    },\n\n    lookAllArticle() {\n      dispatch(actionCreator.lookAllArticle());\n    }\n\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Header);","map":{"version":3,"sources":["C:/Users/chill/OneDrive/桌面/Project/myapp/src/common/Header/index.js"],"names":["React","Component","connect","CSSTransition","actionCreators","loginActionCreators","HeaderWrapper","Logo","Nav","NavItem","NavSearch","Addition","Button","SearchWrapper","SearchInfo","SearchInfoTitle","SearchInfoSwitch","SearchInfoList","SearchInfoItem","actionCreator","Link","Header","getSearchInfo","show","list","focused","page","totalPage","mouseIn","handleMouseEnter","handleMouseLeave","handleChangePage","props","newList","toJS","pageList","i","push","spinIcon","icon","render","handleInputFocus","handleInputBlur","login","logOut","account","lookSelfArticle","lookAllArticle","mapStateToProps","state","getIn","mapDispatchToProps","dispatch","size","getheaderList","searchFocus","searchBlur","mouseEnter","mouseLeave","spin","originAngle","style","transform","replace","console","log","parseInt","changePage"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { CSSTransition } from \"react-transition-group\";\r\nimport { actionCreators as loginActionCreators } from \"../../pages/login/store\"\r\nimport {\r\n  HeaderWrapper,\r\n  Logo,\r\n  Nav,\r\n  NavItem,\r\n  NavSearch,\r\n  Addition,\r\n  Button,\r\n  SearchWrapper,\r\n  SearchInfo,\r\n  SearchInfoTitle,\r\n  SearchInfoSwitch,\r\n  SearchInfoList,\r\n  SearchInfoItem,\r\n} from \"./style\";\r\nimport { actionCreator } from \"./store\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nclass Header extends Component {\r\n  getSearchInfo(show) {\r\n    const {\r\n      list,\r\n      focused,\r\n      page,\r\n      totalPage,\r\n      mouseIn,\r\n      handleMouseEnter,\r\n      handleMouseLeave,\r\n      handleChangePage,\r\n    } = this.props;\r\n    const newList = list.toJS();\r\n    const pageList = [];\r\n\r\n    for (let i = (page - 1) * 10; i < page * 10; i++) {\r\n      pageList.push(<SearchInfoItem key={[i]}>{newList[i]}</SearchInfoItem>);\r\n    }\r\n\r\n    if (focused || mouseIn) {\r\n      return (\r\n        <SearchInfo\r\n          onMouseEnter={handleMouseEnter}\r\n          onMouseLeave={handleMouseLeave}\r\n        >\r\n          <SearchInfoTitle>\r\n            熱門搜索\r\n            <SearchInfoSwitch\r\n              onClick={() => handleChangePage(page, totalPage, this.spinIcon)}\r\n            >\r\n              <span\r\n                ref={(icon) => {\r\n                  this.spinIcon = icon;\r\n                }}\r\n                className=\"iconfont spin\"\r\n              >\r\n                &#xe851;\r\n              </span>\r\n              換一批\r\n            </SearchInfoSwitch>\r\n          </SearchInfoTitle>\r\n          <SearchInfoList>{pageList}</SearchInfoList>\r\n        </SearchInfo>\r\n      );\r\n    } else return null;\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      focused,\r\n      handleInputFocus,\r\n      handleInputBlur,\r\n      list,\r\n      login,\r\n      logOut,\r\n      account, \r\n      lookSelfArticle,\r\n      lookAllArticle\r\n    } = this.props;\r\n    return (\r\n      <HeaderWrapper>\r\n        <Nav>\r\n          <Link to=\"/\">\r\n            <NavItem className=\"left active\">首頁</NavItem>\r\n          </Link>\r\n          <Link to=\"/\">\r\n            <NavItem className=\"left\" onClick={lookAllArticle}>\r\n              全部文章\r\n            </NavItem>\r\n          </Link>\r\n          {login ? (\r\n            <Link to=\"/\">\r\n              <NavItem className=\"left\" onClick={lookSelfArticle}>\r\n                {account + \"的文章\"}\r\n              </NavItem>\r\n            </Link>\r\n          ) : (\r\n            <NavItem className=\"left nopoint\">請先登入</NavItem>\r\n          )}\r\n          <NavItem className=\"right\"></NavItem>\r\n\r\n          <SearchWrapper>\r\n            <CSSTransition in={focused} timeout={200} classNames=\"slide\">\r\n              <NavSearch\r\n                className={focused ? \"focused\" : \"\"}\r\n                onFocus={() => handleInputFocus(list)}\r\n                onBlur={handleInputBlur}\r\n              ></NavSearch>\r\n            </CSSTransition>\r\n            <span\r\n              className={focused ? \"iconfont focused zoom\" : \"iconfont zoom\"}\r\n            >\r\n              &#xe721;\r\n            </span>\r\n            {this.getSearchInfo(focused)}\r\n          </SearchWrapper>\r\n        </Nav>\r\n        <Addition>\r\n          <Link to=\"/register\">\r\n            <Button className=\"reg\">註冊</Button>\r\n          </Link>\r\n          {login ? (\r\n            <Button className=\"reg\" onClick={logOut}>\r\n              退出\r\n            </Button>\r\n          ) : (\r\n            <Link to=\"/login\">\r\n              <Button className=\"reg\">\r\n                <span className=\"iconfont\">&#xe636;</span>登入\r\n              </Button>\r\n            </Link>\r\n          )}\r\n          <Link to=\"/write\">\r\n            <Button className=\"writting\">\r\n              <span className=\"iconfont\">&#xe624;</span>寫文章\r\n            </Button>\r\n          </Link>\r\n        </Addition>\r\n      </HeaderWrapper>\r\n    );\r\n  }\r\n}\r\n\r\n//將取到的state值映射到props\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    focused: state.getIn([\"header\", \"focused\"]),\r\n    list: state.getIn([\"header\", \"list\"]),\r\n    page: state.getIn([\"header\", \"page\"]),\r\n    mouseIn: state.getIn([\"header\", \"mouseIn\"]),\r\n    totalPage: state.getIn([\"header\", \"totalPage\"]),\r\n    login: state.getIn([\"login\", \"login\"]),\r\n    account: state.getIn([\"login\", \"account\"]),\r\n  };\r\n};\r\n//使prop中的方法能調用dispatch\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    handleInputFocus(list) {\r\n      list.size === 0 && dispatch(actionCreator.getheaderList());\r\n      dispatch(actionCreator.searchFocus());\r\n    },\r\n    handleInputBlur() {\r\n      dispatch(actionCreator.searchBlur());\r\n    },\r\n    handleMouseEnter() {\r\n      dispatch(actionCreator.mouseEnter());\r\n    },\r\n    handleMouseLeave() {\r\n      dispatch(actionCreator.mouseLeave());\r\n    },\r\n    handleChangePage(page, totalPage, spin) {\r\n      let originAngle = spin.style.transform.replace(/[^0-9]/gi, \"\");\r\n      console.log(originAngle);\r\n      if (originAngle) {\r\n        originAngle = parseInt(originAngle, 10);\r\n      } else {\r\n        originAngle = 0;\r\n      }\r\n      spin.style.transform = \"rotate(\" + (originAngle + 360) + \"deg)\";\r\n\r\n      if (page < totalPage) {\r\n        dispatch(actionCreator.changePage(page + 1));\r\n      } else {\r\n        dispatch(actionCreator.changePage(1));\r\n      }\r\n    },\r\n    logOut() {\r\n      //引用他處的actionCreacter\r\n      dispatch(loginActionCreators.logOut())\r\n    },\r\n    lookSelfArticle() {\r\n      dispatch(actionCreator.lookSelfArticle())\r\n    },\r\n    lookAllArticle() {\r\n      dispatch(actionCreator.lookAllArticle());\r\n    }\r\n  };\r\n\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Header);\r\n"]},"metadata":{},"sourceType":"module"}