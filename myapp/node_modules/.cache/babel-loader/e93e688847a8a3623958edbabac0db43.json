{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\chill\\\\OneDrive\\\\\\u684C\\u9762\\\\Project\\\\myapp\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\chill\\\\OneDrive\\\\\\u684C\\u9762\\\\Project\\\\myapp\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\chill\\\\OneDrive\\\\\\u684C\\u9762\\\\Project\\\\myapp\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\chill\\\\OneDrive\\\\\\u684C\\u9762\\\\Project\\\\myapp\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{PureComponent}from\"react\";import{connect}from\"react-redux\";import{LoginWrapper,LoginBox,Input,Button,Textarea,Dialog}from\"./style\";import{actionCreators}from\"./store\";import{Link,Redirect}from\"react-router-dom\";var Write=/*#__PURE__*/function(_PureComponent){_inherits(Write,_PureComponent);var _super=_createSuper(Write);function Write(){_classCallCheck(this,Write);return _super.apply(this,arguments);}_createClass(Write,[{key:\"changePostStatus\",//如果發表成功跳回首頁\nvalue:function changePostStatus(){if(this.props.postStatus===1)return/*#__PURE__*/React.createElement(Redirect,{to:{pathname:\"/\"}});}},{key:\"render\",value:function render(){var _this=this;var _this$props=this.props,postArticle=_this$props.postArticle,postStatus=_this$props.postStatus,renewPostStatus=_this$props.renewPostStatus,login=_this$props.login;if(login){return/*#__PURE__*/React.createElement(LoginWrapper,null,/*#__PURE__*/React.createElement(LoginBox,null,/*#__PURE__*/React.createElement(Input,{placeholder:\"\\u6A19\\u984C\",ref:function ref(dom){_this.title=dom;}}),/*#__PURE__*/React.createElement(Input,{placeholder:\"\\u6B32\\u63D2\\u5165\\u4E4B\\u5716\\u7247\\u7DB2\\u5740 http://............\",ref:function ref(dom){_this.imgUrl=dom;}}),/*#__PURE__*/React.createElement(Textarea,{placeholder:\"\\u6587\\u7AE0\\u5167\\u5BB9\",ref:function ref(dom){_this.content=dom;}}),/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){return postArticle(_this.title.value,_this.content.value,_this.imgUrl.value);}},\"\\u767C\\u8868\\u6587\\u7AE0\"),postStatus==1?this.changePostStatus():null,postStatus==2?/*#__PURE__*/React.createElement(Dialog,null,\"\\u767C\\u8868\\u5931\\u6557\\uFF0C\\u518D\\u8A66\\u4E00\\u6B21\"):null));}else{return/*#__PURE__*/React.createElement(Redirect,{to:\"/login\"});}}}]);return Write;}(PureComponent);var mapStateToProps=function mapStateToProps(state){return{postStatus:state.getIn([\"write\",\"postStatus\"]),login:state.getIn([\"login\",\"login\"])};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{postArticle:function postArticle(title,content,imgUrl){dispatch(actionCreators.postArticle(title,content,imgUrl));},renewPostStatus:function renewPostStatus(){dispatch(actionCreators.postArticleAction(0));}};};export default connect(mapStateToProps,mapDispatchToProps)(Write);","map":{"version":3,"sources":["C:/Users/chill/OneDrive/桌面/Project/myapp/src/pages/write/index.js"],"names":["React","PureComponent","connect","LoginWrapper","LoginBox","Input","Button","Textarea","Dialog","actionCreators","Link","Redirect","Write","props","postStatus","pathname","postArticle","renewPostStatus","login","dom","title","imgUrl","content","value","changePostStatus","mapStateToProps","state","getIn","mapDispatchToProps","dispatch","postArticleAction"],"mappings":"gsBAAA,MAAOA,CAAAA,KAAP,EAAgBC,aAAhB,KAAqC,OAArC,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,OAASC,YAAT,CAAuBC,QAAvB,CAAiCC,KAAjC,CAAwCC,MAAxC,CAA+CC,QAA/C,CAAwDC,MAAxD,KAAsE,SAAtE,CACA,OAASC,cAAT,KAA+B,SAA/B,CACA,OAASC,IAAT,CAAeC,QAAf,KAA+B,kBAA/B,C,GAEMC,CAAAA,K,oOAEJ;iCACmB,CACjB,GAAI,KAAKC,KAAL,CAAWC,UAAX,GAA0B,CAA9B,CAAiC,mBAAO,oBAAC,QAAD,EAAU,EAAE,CAAE,CAAEC,QAAQ,CAAE,GAAZ,CAAd,EAAP,CAClC,C,uCAEQ,gCACqD,KAAKF,KAD1D,CACCG,WADD,aACCA,WADD,CACcF,UADd,aACcA,UADd,CAC0BG,eAD1B,aAC0BA,eAD1B,CAC2CC,KAD3C,aAC2CA,KAD3C,CAGP,GAAIA,KAAJ,CAAW,CACT,mBACE,oBAAC,YAAD,mBACE,oBAAC,QAAD,mBACE,oBAAC,KAAD,EACE,WAAW,CAAC,cADd,CAEE,GAAG,CAAE,aAACC,GAAD,CAAS,CACZ,KAAI,CAACC,KAAL,CAAaD,GAAb,CACD,CAJH,EADF,cAOE,oBAAC,KAAD,EACE,WAAW,CAAC,sEADd,CAEE,GAAG,CAAE,aAACA,GAAD,CAAS,CACZ,KAAI,CAACE,MAAL,CAAcF,GAAd,CACD,CAJH,EAPF,cAaE,oBAAC,QAAD,EACE,WAAW,CAAC,0BADd,CAEE,GAAG,CAAE,aAACA,GAAD,CAAS,CACZ,KAAI,CAACG,OAAL,CAAeH,GAAf,CACD,CAJH,EAbF,cAoBE,oBAAC,MAAD,EACE,OAAO,CAAE,kBAAM,CACb,MAAOH,CAAAA,WAAW,CAChB,KAAI,CAACI,KAAL,CAAWG,KADK,CAEhB,KAAI,CAACD,OAAL,CAAaC,KAFG,CAGhB,KAAI,CAACF,MAAL,CAAYE,KAHI,CAAlB,CAKD,CAPH,6BApBF,CA+BGT,UAAU,EAAE,CAAZ,CAAe,KAAKU,gBAAL,EAAf,CAAuC,IA/B1C,CAgCGV,UAAU,EAAI,CAAd,cAAkB,oBAAC,MAAD,+DAAlB,CAA+C,IAhClD,CADF,CADF,CAsCD,CAvCD,IAuCO,CACL,mBAAO,oBAAC,QAAD,EAAU,EAAE,CAAC,QAAb,EAAP,CACD,CACF,C,mBApDiBb,a,EAuDpB,GAAMwB,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACC,KAAD,QAAY,CAClCZ,UAAU,CAAEY,KAAK,CAACC,KAAN,CAAY,CAAC,OAAD,CAAU,YAAV,CAAZ,CADsB,CAElCT,KAAK,CAAEQ,KAAK,CAACC,KAAN,CAAY,CAAC,OAAD,CAAS,OAAT,CAAZ,CAF2B,CAAZ,EAAxB,CAKA,GAAMC,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAACC,QAAD,QAAe,CACxCb,WADwC,sBAC5BI,KAD4B,CACrBE,OADqB,CACZD,MADY,CACJ,CAClCQ,QAAQ,CAACpB,cAAc,CAACO,WAAf,CAA2BI,KAA3B,CAAkCE,OAAlC,CAA2CD,MAA3C,CAAD,CAAR,CACD,CAHuC,CAIxCJ,eAJwC,2BAItB,CAChBY,QAAQ,CAACpB,cAAc,CAACqB,iBAAf,CAAiC,CAAjC,CAAD,CAAR,CACD,CANuC,CAAf,EAA3B,CASA,cAAe5B,CAAAA,OAAO,CAACuB,eAAD,CAAkBG,kBAAlB,CAAP,CAA6ChB,KAA7C,CAAf","sourcesContent":["import React, { PureComponent } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { LoginWrapper, LoginBox, Input, Button,Textarea,Dialog } from \"./style\";\r\nimport { actionCreators } from \"./store\";\r\nimport { Link, Redirect } from \"react-router-dom\";\r\n\r\nclass Write extends PureComponent {\r\n\r\n  //如果發表成功跳回首頁\r\n  changePostStatus() {\r\n    if (this.props.postStatus === 1) return <Redirect to={{ pathname: \"/\" }} />;\r\n  }\r\n\r\n  render() {\r\n    const { postArticle, postStatus, renewPostStatus, login } = this.props;\r\n\r\n    if (login) {\r\n      return (\r\n        <LoginWrapper>\r\n          <LoginBox>\r\n            <Input\r\n              placeholder=\"標題\"\r\n              ref={(dom) => {\r\n                this.title = dom;\r\n              }}\r\n            />\r\n            <Input\r\n              placeholder=\"欲插入之圖片網址 http://............\"\r\n              ref={(dom) => {\r\n                this.imgUrl = dom;\r\n              }}\r\n            />\r\n            <Textarea\r\n              placeholder=\"文章內容\"\r\n              ref={(dom) => {\r\n                this.content = dom;\r\n              }}\r\n            />\r\n\r\n            <Button\r\n              onClick={() => {\r\n                return postArticle(\r\n                  this.title.value,\r\n                  this.content.value,\r\n                  this.imgUrl.value\r\n                );\r\n              }}\r\n            >\r\n              發表文章\r\n            </Button>\r\n            {postStatus==1? this.changePostStatus():null}\r\n            {postStatus == 2 ? <Dialog>發表失敗，再試一次</Dialog> : null}\r\n          </LoginBox>\r\n        </LoginWrapper>\r\n      );\r\n    } else {\r\n      return <Redirect to=\"/login\" />;\r\n    }\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  postStatus: state.getIn([\"write\", \"postStatus\"]),\r\n  login: state.getIn([\"login\",\"login\"])\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  postArticle(title, content, imgUrl) {\r\n    dispatch(actionCreators.postArticle(title, content, imgUrl))\r\n  },\r\n  renewPostStatus() {\r\n    dispatch(actionCreators.postArticleAction(0))\r\n  }\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Write);\r\n"]},"metadata":{},"sourceType":"module"}