{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\chill\\\\OneDrive\\\\\\u684C\\u9762\\\\Project\\\\myapp\\\\src\\\\pages\\\\detail\\\\index.js\";\nimport React, { Component } from \"react\";\nimport { DetailWrapper, Header, Content, Image, Textarea, Button, AuthorInfo } from \"./style\";\nimport { connect } from \"react-redux\";\nimport axios from \"axios\";\nimport { actionCreators } from \"./store\";\nimport { withRouter, Redirect } from \"react-router-dom\";\n\nclass Detail extends Component {\n  BackHom() {\n    if (this.props.login) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: {\n          pathname: \"/\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 12,\n          columnNumber: 14\n        }\n      });\n    }\n  }\n\n  render() {\n    const {\n      login,\n      account,\n      title,\n      content,\n      imageUrl,\n      username,\n      editStatus,\n      editArticle,\n      changeDetailEditStatus\n    } = this.props;\n    return /*#__PURE__*/React.createElement(DetailWrapper, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 30,\n        columnNumber: 9\n      }\n    }, title), /*#__PURE__*/React.createElement(AuthorInfo, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"iconfont\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 11\n      }\n    }, \"\\uE624\"), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"username\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 11\n      }\n    }, username), login && account === username ? /*#__PURE__*/React.createElement(\"span\", {\n      className: \"edit\",\n      onClick: () => {\n        BackHom();\n        changeDetailEditStatus(true);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 13\n      }\n    }, \"\\u7DE8\\u8F2F\\u6587\\u7AE0\") : null), /*#__PURE__*/React.createElement(\"img\", {\n      src: imageUrl,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 9\n      }\n    }), editStatus ? /*#__PURE__*/React.createElement(Textarea, {\n      ref: dom => {\n        this.contentValue = dom;\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 11\n      }\n    }, content) : /*#__PURE__*/React.createElement(Content\n    /*dangerouslySetInnerHTML={ {__html: content} }*/\n    , {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 11\n      }\n    }, content), editStatus ? /*#__PURE__*/React.createElement(Button, {\n      onClick: () => {\n        editArticle(this.props.match.params.id, this.contentValue.value);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 11\n      }\n    }, \"\\u4FEE\\u6539\\u5B8C\\u6210\") : null);\n  }\n\n  componentDidMount() {\n    this.props.getDetail(this.props.match.params.id);\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  title: state.getIn([\"detail\", \"title\"]),\n  content: state.getIn([\"detail\", \"content\"]),\n  imageUrl: state.getIn([\"detail\", \"imageUrl\"]),\n  username: state.getIn([\"detail\", \"username\"]),\n  editStatus: state.getIn([\"detail\", \"editStatus\"]),\n  login: state.getIn([\"login\", \"login\"]),\n  account: state.getIn([\"login\", \"account\"])\n});\n\nconst mapDispatchToProps = dispatch => ({\n  getDetail(id) {\n    dispatch(actionCreators.getDetail(id));\n  },\n\n  editArticle(id, content) {\n    dispatch(actionCreators.editArticle(id, content));\n  },\n\n  changeDetailEditStatus(editStatus) {\n    dispatch(actionCreators.changeDetailEditStatusAction(editStatus));\n  }\n\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(Detail));","map":{"version":3,"sources":["C:/Users/chill/OneDrive/桌面/Project/myapp/src/pages/detail/index.js"],"names":["React","Component","DetailWrapper","Header","Content","Image","Textarea","Button","AuthorInfo","connect","axios","actionCreators","withRouter","Redirect","Detail","BackHom","props","login","pathname","render","account","title","content","imageUrl","username","editStatus","editArticle","changeDetailEditStatus","dom","contentValue","match","params","id","value","componentDidMount","getDetail","mapStateToProps","state","getIn","mapDispatchToProps","dispatch","changeDetailEditStatusAction"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { DetailWrapper, Header, Content, Image, Textarea, Button, AuthorInfo } from \"./style\"\r\nimport { connect } from \"react-redux\"\r\nimport axios from \"axios\"\r\nimport { actionCreators } from \"./store\"\r\nimport { withRouter, Redirect } from \"react-router-dom\"\r\n\r\n\r\nclass Detail extends Component {\r\n  BackHom() {\r\n    if (this.props.login) {\r\n      return <Redirect to={{ pathname: \"/\" }} />;\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      login,\r\n      account,\r\n      title,\r\n      content,\r\n      imageUrl,\r\n      username,\r\n      editStatus,\r\n      editArticle,\r\n      changeDetailEditStatus,\r\n    } = this.props;\r\n    return (\r\n      <DetailWrapper>\r\n        <Header>{title}</Header>\r\n\r\n        <AuthorInfo>\r\n          <span className=\"iconfont\">&#xe624;</span>\r\n          <span className=\"username\">{username}</span>\r\n          {login && account === username ? (\r\n            <span\r\n              className=\"edit\"\r\n              onClick={() => {\r\n                BackHom()\r\n                changeDetailEditStatus(true);\r\n              }}\r\n            >\r\n              編輯文章\r\n            </span>\r\n          ) : null}\r\n        </AuthorInfo>\r\n\r\n        <img src={imageUrl} />\r\n        {editStatus ? (\r\n          <Textarea\r\n            ref={(dom) => {\r\n              this.contentValue = dom;\r\n            }}\r\n          >\r\n            {content}\r\n          </Textarea>\r\n        ) : (\r\n          <Content /*dangerouslySetInnerHTML={ {__html: content} }*/>\r\n            {content}\r\n          </Content>\r\n        )}\r\n        {editStatus ? (\r\n          <Button\r\n            onClick={() => {\r\n              editArticle(this.props.match.params.id, this.contentValue.value);\r\n            }}\r\n          >\r\n            修改完成\r\n          </Button>\r\n        ) : null}\r\n      </DetailWrapper>\r\n    );\r\n  }\r\n  componentDidMount() {\r\n    this.props.getDetail(this.props.match.params.id);\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  title: state.getIn([\"detail\", \"title\"]),\r\n  content: state.getIn([\"detail\", \"content\"]),\r\n  imageUrl: state.getIn([\"detail\", \"imageUrl\"]),\r\n  username: state.getIn([\"detail\", \"username\"]),\r\n  editStatus: state.getIn([\"detail\", \"editStatus\"]),\r\n  login: state.getIn([\"login\", \"login\"]),\r\n  account: state.getIn([\"login\", \"account\"]),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  getDetail(id) {\r\n    dispatch(actionCreators.getDetail(id))   \r\n  },\r\n  editArticle(id, content) {\r\n    dispatch(actionCreators.editArticle(id, content))\r\n  },\r\n  changeDetailEditStatus(editStatus) {\r\n    dispatch(actionCreators.changeDetailEditStatusAction(editStatus));\r\n  },\r\n})\r\n\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(withRouter(Detail));\r\n"]},"metadata":{},"sourceType":"module"}