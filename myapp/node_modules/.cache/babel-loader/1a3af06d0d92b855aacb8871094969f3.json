{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\chill\\\\myapp\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\chill\\\\myapp\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\chill\\\\myapp\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\chill\\\\myapp\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{connect}from\"react-redux\";import{CSSTransition}from\"react-transition-group\";import{actionCreators as loginActionCreators}from\"../../pages/login/store\";import{HeaderWrapper,Logo,Nav,NavItem,NavSearch,Addition,Button,SearchWrapper,SearchInfo,SearchInfoTitle,SearchInfoSwitch,SearchInfoList,SearchInfoItem}from\"./style\";import{actionCreator}from\"./store\";import{Link}from\"react-router-dom\";var Header=/*#__PURE__*/function(_Component){_inherits(Header,_Component);var _super=_createSuper(Header);function Header(){_classCallCheck(this,Header);return _super.apply(this,arguments);}_createClass(Header,[{key:\"getSearchInfo\",value:function getSearchInfo(show){var _this=this;var _this$props=this.props,list=_this$props.list,focused=_this$props.focused,page=_this$props.page,totalPage=_this$props.totalPage,mouseIn=_this$props.mouseIn,handleMouseEnter=_this$props.handleMouseEnter,handleMouseLeave=_this$props.handleMouseLeave,handleChangePage=_this$props.handleChangePage;var newList=list.toJS();var pageList=[];for(var i=(page-1)*10;i<page*10;i++){pageList.push(/*#__PURE__*/React.createElement(SearchInfoItem,{key:[i]},newList[i]));}if(focused||mouseIn){return/*#__PURE__*/React.createElement(SearchInfo,{onMouseEnter:handleMouseEnter,onMouseLeave:handleMouseLeave},/*#__PURE__*/React.createElement(SearchInfoTitle,null,\"\\u71B1\\u9580\\u641C\\u7D22\",/*#__PURE__*/React.createElement(SearchInfoSwitch,{onClick:function onClick(){return handleChangePage(page,totalPage,_this.spinIcon);}},/*#__PURE__*/React.createElement(\"span\",{ref:function ref(icon){_this.spinIcon=icon;},className:\"iconfont spin\"},\"\\uE851\"),\"\\u63DB\\u4E00\\u6279\")),/*#__PURE__*/React.createElement(SearchInfoList,null,pageList));}else return null;}},{key:\"render\",value:function render(){var _this$props2=this.props,focused=_this$props2.focused,handleInputFocus=_this$props2.handleInputFocus,handleInputBlur=_this$props2.handleInputBlur,list=_this$props2.list,login=_this$props2.login,logOut=_this$props2.logOut;return/*#__PURE__*/React.createElement(HeaderWrapper,null,/*#__PURE__*/React.createElement(Link,{to:\"/\"},/*#__PURE__*/React.createElement(Logo,null)),/*#__PURE__*/React.createElement(Nav,null,/*#__PURE__*/React.createElement(NavItem,{className:\"left active\"},\"\\u9996\\u9801\"),/*#__PURE__*/React.createElement(NavItem,{className:\"left\"},\"\\u4E0B\\u8F09APP\"),/*#__PURE__*/React.createElement(NavItem,{className:\"right\"},/*#__PURE__*/React.createElement(\"span\",{className:\"iconfont\"},\"\\uE636\")),login?/*#__PURE__*/React.createElement(NavItem,{className:\"right\",onClick:logOut},\"\\u9000\\u51FA\"):/*#__PURE__*/React.createElement(Link,{to:\"/login\"},/*#__PURE__*/React.createElement(NavItem,{className:\"right\"},\"\\u767B\\u5165\")),/*#__PURE__*/React.createElement(SearchWrapper,null,/*#__PURE__*/React.createElement(CSSTransition,{in:focused,timeout:200,classNames:\"slide\"},/*#__PURE__*/React.createElement(NavSearch,{className:focused?\"focused\":\"\",onFocus:function onFocus(){return handleInputFocus(list);},onBlur:handleInputBlur})),/*#__PURE__*/React.createElement(\"span\",{className:focused?\"iconfont focused zoom\":\"iconfont zoom\"},\"\\uE721\"),this.getSearchInfo(focused))),/*#__PURE__*/React.createElement(Addition,null,/*#__PURE__*/React.createElement(Link,{to:\"/register\"},/*#__PURE__*/React.createElement(Button,{className:\"reg\"},\"\\u8A3B\\u518A\")),/*#__PURE__*/React.createElement(Link,{to:\"/write\"},/*#__PURE__*/React.createElement(Button,{className:\"writting\"},/*#__PURE__*/React.createElement(\"span\",{className:\"iconfont\"},\"\\uE624\"),\"\\u5BEB\\u6587\\u7AE0\"))));}}]);return Header;}(Component);//將取到的state值映射到props\nvar mapStateToProps=function mapStateToProps(state){return{focused:state.getIn([\"header\",\"focused\"]),list:state.getIn([\"header\",\"list\"]),page:state.getIn([\"header\",\"page\"]),mouseIn:state.getIn([\"header\",\"mouseIn\"]),totalPage:state.getIn([\"header\",\"totalPage\"]),login:state.getIn([\"login\",\"login\"])};};//使prop中的方法能調用dispatch\nvar mapDispatchToProps=function mapDispatchToProps(dispatch){return{handleInputFocus:function handleInputFocus(list){list.size===0&&dispatch(actionCreator.getheaderList());dispatch(actionCreator.searchFocus());},handleInputBlur:function handleInputBlur(){dispatch(actionCreator.searchBlur());},handleMouseEnter:function handleMouseEnter(){dispatch(actionCreator.mouseEnter());},handleMouseLeave:function handleMouseLeave(){dispatch(actionCreator.mouseLeave());},handleChangePage:function handleChangePage(page,totalPage,spin){var originAngle=spin.style.transform.replace(/[^0-9]/gi,\"\");console.log(originAngle);if(originAngle){originAngle=parseInt(originAngle,10);}else{originAngle=0;}spin.style.transform=\"rotate(\"+(originAngle+360)+\"deg)\";if(page<totalPage){dispatch(actionCreator.changePage(page+1));}else{dispatch(actionCreator.changePage(1));}},logOut:function logOut(){dispatch(loginActionCreators.logOut());}};};export default connect(mapStateToProps,mapDispatchToProps)(Header);","map":{"version":3,"sources":["C:/Users/chill/myapp/src/common/Header/index.js"],"names":["React","Component","connect","CSSTransition","actionCreators","loginActionCreators","HeaderWrapper","Logo","Nav","NavItem","NavSearch","Addition","Button","SearchWrapper","SearchInfo","SearchInfoTitle","SearchInfoSwitch","SearchInfoList","SearchInfoItem","actionCreator","Link","Header","show","props","list","focused","page","totalPage","mouseIn","handleMouseEnter","handleMouseLeave","handleChangePage","newList","toJS","pageList","i","push","spinIcon","icon","handleInputFocus","handleInputBlur","login","logOut","getSearchInfo","mapStateToProps","state","getIn","mapDispatchToProps","dispatch","size","getheaderList","searchFocus","searchBlur","mouseEnter","mouseLeave","spin","originAngle","style","transform","replace","console","log","parseInt","changePage"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { CSSTransition } from \"react-transition-group\";\r\nimport { actionCreators as loginActionCreators } from \"../../pages/login/store\"\r\nimport {\r\n  HeaderWrapper,\r\n  Logo,\r\n  Nav,\r\n  NavItem,\r\n  NavSearch,\r\n  Addition,\r\n  Button,\r\n  SearchWrapper,\r\n  SearchInfo,\r\n  SearchInfoTitle,\r\n  SearchInfoSwitch,\r\n  SearchInfoList,\r\n  SearchInfoItem,\r\n} from \"./style\";\r\nimport { actionCreator } from \"./store\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nclass Header extends Component {\r\n  getSearchInfo(show) {\r\n    const {\r\n      list,\r\n      focused,\r\n      page,\r\n      totalPage,\r\n      mouseIn,\r\n      handleMouseEnter,\r\n      handleMouseLeave,\r\n      handleChangePage,\r\n    } = this.props;\r\n    const newList = list.toJS();\r\n    const pageList = [];\r\n\r\n    for (let i = (page - 1) * 10; i < page * 10; i++) {\r\n      pageList.push(<SearchInfoItem key={[i]}>{newList[i]}</SearchInfoItem>);\r\n    }\r\n\r\n    if (focused || mouseIn) {\r\n      return (\r\n        <SearchInfo\r\n          onMouseEnter={handleMouseEnter}\r\n          onMouseLeave={handleMouseLeave}\r\n        >\r\n          <SearchInfoTitle>\r\n            熱門搜索\r\n            <SearchInfoSwitch\r\n              onClick={() => handleChangePage(page, totalPage, this.spinIcon)}\r\n            >\r\n              <span\r\n                ref={(icon) => {\r\n                  this.spinIcon = icon;\r\n                }}\r\n                className=\"iconfont spin\"\r\n              >\r\n                &#xe851;\r\n              </span>\r\n              換一批\r\n            </SearchInfoSwitch>\r\n          </SearchInfoTitle>\r\n          <SearchInfoList>{pageList}</SearchInfoList>\r\n        </SearchInfo>\r\n      );\r\n    } else return null;\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      focused,\r\n      handleInputFocus,\r\n      handleInputBlur,\r\n      list,\r\n      login,\r\n      logOut,\r\n    } = this.props;\r\n    return (\r\n      <HeaderWrapper>\r\n        <Link to=\"/\">\r\n          <Logo />\r\n        </Link>\r\n        <Nav>\r\n          <NavItem className=\"left active\">首頁</NavItem>\r\n          <NavItem className=\"left\">下載APP</NavItem>\r\n          <NavItem className=\"right\">\r\n            <span className=\"iconfont\">&#xe636;</span>\r\n          </NavItem>\r\n          {login ? (\r\n            <NavItem className=\"right\" onClick={logOut}>\r\n              退出\r\n            </NavItem>\r\n          ) : (\r\n            <Link to=\"/login\">\r\n              <NavItem className=\"right\">登入</NavItem>\r\n            </Link>\r\n          )}\r\n          <SearchWrapper>\r\n            <CSSTransition in={focused} timeout={200} classNames=\"slide\">\r\n              <NavSearch\r\n                className={focused ? \"focused\" : \"\"}\r\n                onFocus={() => handleInputFocus(list)}\r\n                onBlur={handleInputBlur}\r\n              ></NavSearch>\r\n            </CSSTransition>\r\n            <span\r\n              className={focused ? \"iconfont focused zoom\" : \"iconfont zoom\"}\r\n            >\r\n              &#xe721;\r\n            </span>\r\n            {this.getSearchInfo(focused)}\r\n          </SearchWrapper>\r\n        </Nav>\r\n        <Addition>\r\n          <Link to=\"/register\">\r\n            <Button className=\"reg\">註冊</Button>\r\n          </Link>\r\n          <Link to=\"/write\">\r\n            <Button className=\"writting\">\r\n              <span className=\"iconfont\">&#xe624;</span>寫文章\r\n            </Button>\r\n          </Link>\r\n        </Addition>\r\n      </HeaderWrapper>\r\n    );\r\n  }\r\n}\r\n\r\n//將取到的state值映射到props\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    focused: state.getIn([\"header\", \"focused\"]),\r\n    list: state.getIn([\"header\", \"list\"]),\r\n    page: state.getIn([\"header\", \"page\"]),\r\n    mouseIn: state.getIn([\"header\", \"mouseIn\"]),\r\n    totalPage: state.getIn([\"header\", \"totalPage\"]),\r\n    login: state.getIn([\"login\", \"login\"]),\r\n  };\r\n};\r\n//使prop中的方法能調用dispatch\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    handleInputFocus(list) {\r\n      list.size === 0 && dispatch(actionCreator.getheaderList());\r\n      dispatch(actionCreator.searchFocus());\r\n    },\r\n    handleInputBlur() {\r\n      dispatch(actionCreator.searchBlur());\r\n    },\r\n    handleMouseEnter() {\r\n      dispatch(actionCreator.mouseEnter());\r\n    },\r\n    handleMouseLeave() {\r\n      dispatch(actionCreator.mouseLeave());\r\n    },\r\n    handleChangePage(page, totalPage, spin) {\r\n      let originAngle = spin.style.transform.replace(/[^0-9]/gi, \"\");\r\n      console.log(originAngle);\r\n      if (originAngle) {\r\n        originAngle = parseInt(originAngle, 10);\r\n      } else {\r\n        originAngle = 0;\r\n      }\r\n      spin.style.transform = \"rotate(\" + (originAngle + 360) + \"deg)\";\r\n\r\n      if (page < totalPage) {\r\n        dispatch(actionCreator.changePage(page + 1));\r\n      } else {\r\n        dispatch(actionCreator.changePage(1));\r\n      }\r\n    },\r\n    logOut() {\r\n      dispatch(loginActionCreators.logOut())\r\n    }\r\n  };\r\n\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Header);\r\n"]},"metadata":{},"sourceType":"module"}