{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\chill\\\\OneDrive\\\\\\u684C\\u9762\\\\Project\\\\myapp\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\chill\\\\OneDrive\\\\\\u684C\\u9762\\\\Project\\\\myapp\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\chill\\\\OneDrive\\\\\\u684C\\u9762\\\\Project\\\\myapp\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\chill\\\\OneDrive\\\\\\u684C\\u9762\\\\Project\\\\myapp\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{DetailWrapper,Header,Content,Image,Textarea,Button,AuthorInfo}from\"./style\";import{connect}from\"react-redux\";import axios from\"axios\";import{actionCreators}from\"./store\";import{withRouter,Redirect}from\"react-router-dom\";var Detail=/*#__PURE__*/function(_Component){_inherits(Detail,_Component);var _super=_createSuper(Detail);function Detail(){_classCallCheck(this,Detail);return _super.apply(this,arguments);}_createClass(Detail,[{key:\"backHome\",value:function backHome(){return/*#__PURE__*/React.createElement(Redirect,{to:{pathname:\"/\"}});}},{key:\"render\",value:function render(){var _this=this;var _this$props=this.props,login=_this$props.login,account=_this$props.account,title=_this$props.title,content=_this$props.content,imageUrl=_this$props.imageUrl,username=_this$props.username,editStatus=_this$props.editStatus,editArticle=_this$props.editArticle,changeDetailEditStatus=_this$props.changeDetailEditStatus;return/*#__PURE__*/React.createElement(DetailWrapper,null,/*#__PURE__*/React.createElement(Header,null,title),/*#__PURE__*/React.createElement(AuthorInfo,null,/*#__PURE__*/React.createElement(\"span\",{className:\"iconfont\"},\"\\uE624\"),/*#__PURE__*/React.createElement(\"span\",{className:\"username\"},username),login&&account===username?/*#__PURE__*/React.createElement(\"span\",{className:\"edit\",onClick:function onClick(){changeDetailEditStatus(1);}},\"\\u7DE8\\u8F2F\\u6587\\u7AE0\"):null),/*#__PURE__*/React.createElement(\"img\",{src:imageUrl}),editStatus===1?/*#__PURE__*/React.createElement(Textarea,{ref:function ref(dom){_this.contentValue=dom;}},content):null,editStatus===0||editStatus===2?/*#__PURE__*/React.createElement(Content/*dangerouslySetInnerHTML={ {__html: content} }*/,null,content):null,editStatus===1?/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){editArticle(_this.props.match.params.id,_this.contentValue.value);changeDetailEditStatus(0);}},\"\\u4FEE\\u6539\\u5B8C\\u6210\"):null,editStatus===2?this.backHome():null);}},{key:\"componentDidMount\",value:function componentDidMount(){this.props.getDetail(this.props.match.params.id);}}]);return Detail;}(Component);var mapStateToProps=function mapStateToProps(state){return{title:state.getIn([\"detail\",\"title\"]),content:state.getIn([\"detail\",\"content\"]),imageUrl:state.getIn([\"detail\",\"imageUrl\"]),username:state.getIn([\"detail\",\"username\"]),editStatus:state.getIn([\"detail\",\"editStatus\"]),login:state.getIn([\"login\",\"login\"]),account:state.getIn([\"login\",\"account\"])};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{getDetail:function getDetail(id){dispatch(actionCreators.getDetail(id));},editArticle:function editArticle(id,content){dispatch(actionCreators.editArticle(id,content));},changeDetailEditStatus:function changeDetailEditStatus(editStatus){dispatch(actionCreators.changeDetailEditStatusAction(editStatus));}};};export default connect(mapStateToProps,mapDispatchToProps)(withRouter(Detail));","map":{"version":3,"sources":["C:/Users/chill/OneDrive/桌面/Project/myapp/src/pages/detail/index.js"],"names":["React","Component","DetailWrapper","Header","Content","Image","Textarea","Button","AuthorInfo","connect","axios","actionCreators","withRouter","Redirect","Detail","pathname","props","login","account","title","content","imageUrl","username","editStatus","editArticle","changeDetailEditStatus","dom","contentValue","match","params","id","value","backHome","getDetail","mapStateToProps","state","getIn","mapDispatchToProps","dispatch","changeDetailEditStatusAction"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { DetailWrapper, Header, Content, Image, Textarea, Button, AuthorInfo } from \"./style\"\r\nimport { connect } from \"react-redux\"\r\nimport axios from \"axios\"\r\nimport { actionCreators } from \"./store\"\r\nimport { withRouter, Redirect } from \"react-router-dom\"\r\n\r\n\r\nclass Detail extends Component {\r\n  \r\n  backHome(){\r\n      return (\r\n        <Redirect to={{ pathname: \"/\"}} />\r\n      );\r\n    }\r\n\r\n  render() {\r\n    const {\r\n      login,\r\n      account,\r\n      title,\r\n      content,\r\n      imageUrl,\r\n      username,\r\n      editStatus,\r\n      editArticle,\r\n      changeDetailEditStatus,\r\n    } = this.props;\r\n\r\n    \r\n\r\n    \r\n   \r\n     \r\n    return (\r\n      <DetailWrapper>\r\n        <Header>{title}</Header>\r\n\r\n        <AuthorInfo>\r\n          <span className=\"iconfont\">&#xe624;</span>\r\n          <span className=\"username\">{username}</span>\r\n          {login && account === username ? (\r\n            <span\r\n              className=\"edit\"\r\n              onClick={() => {\r\n                changeDetailEditStatus(1);\r\n              }}\r\n            >\r\n              編輯文章\r\n            </span>\r\n          ) : null}\r\n        </AuthorInfo>\r\n\r\n        <img src={imageUrl} />\r\n        {editStatus === 1 ? (\r\n          <Textarea\r\n            ref={(dom) => {\r\n              this.contentValue = dom;\r\n            }}\r\n          >\r\n            {content}\r\n          </Textarea>): null}\r\n        {editStatus === 0||editStatus ===2? <Content /*dangerouslySetInnerHTML={ {__html: content} }*/>\r\n            {content}\r\n          </Content>:null }\r\n          \r\n        \r\n        {editStatus ===1? (\r\n          <Button\r\n            onClick={() => {\r\n              editArticle(this.props.match.params.id, this.contentValue.value);\r\n              changeDetailEditStatus(0)\r\n            }}\r\n          >\r\n            修改完成\r\n          </Button>\r\n        ) : null}\r\n        {editStatus===2? this.backHome(): null}\r\n      </DetailWrapper>     \r\n    );\r\n  }\r\n  componentDidMount() {\r\n    this.props.getDetail(this.props.match.params.id);\r\n    \r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  title: state.getIn([\"detail\", \"title\"]),\r\n  content: state.getIn([\"detail\", \"content\"]),\r\n  imageUrl: state.getIn([\"detail\", \"imageUrl\"]),\r\n  username: state.getIn([\"detail\", \"username\"]),\r\n  editStatus: state.getIn([\"detail\", \"editStatus\"]),\r\n  login: state.getIn([\"login\", \"login\"]),\r\n  account: state.getIn([\"login\", \"account\"]),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  getDetail(id) {\r\n    dispatch(actionCreators.getDetail(id))   \r\n  },\r\n  editArticle(id, content) {\r\n    dispatch(actionCreators.editArticle(id, content))\r\n  },\r\n  changeDetailEditStatus(editStatus) {\r\n    dispatch(actionCreators.changeDetailEditStatusAction(editStatus));\r\n  },\r\n})\r\n\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(withRouter(Detail));\r\n"]},"metadata":{},"sourceType":"module"}