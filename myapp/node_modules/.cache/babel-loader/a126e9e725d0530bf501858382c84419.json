{"ast":null,"code":"import axios from \"axios\";\nimport * as constants from \"./constants\";\nimport { fromJS } from \"immutable\";\naxios.defaults.withCredentials = true;\nexport const changeHomeData = result => ({\n  type: constants.CHANGE_HOME_DATA,\n  // topicItem: result.topicItem,\n  articleList: result,\n  recommendList: result.recommendList\n});\nexport const addHomeList = (list, nextPage) => ({\n  type: constants.ADD_HOME_LIST,\n  list: fromJS(list),\n  nextPage\n});\nexport const changeScrollTopShow = () => ({\n  type: constants.CHANGE_SCROLL_TOP_SHOW\n});\nexport const getMoreList = page => {\n  return dispatch => {\n    axios.get(\"/api/homeList.json?page=\" + page).then(response => {\n      const result = response.data.data;\n      console.log(result);\n      const action = addHomeList(result, page + 1);\n      dispatch(action);\n    });\n  };\n};\nexport const toggleTopShow = show => ({\n  type: constants.TOGGLE_SCROLL_TOP,\n  show\n});\nexport const getHomeInfo = () => {\n  return dispatch => {\n    axios.get(\"http://35.229.221.230:3000/comment/list?filter=1\").then(response => {\n      console.log(response);\n      const result = response.data.data;\n      const action = changeHomeData(result);\n      dispatch(action);\n    });\n  };\n};\nexport const delArticle = id => {\n  return dispatch => {\n    axios.defaults.withCredentials = true;\n    axios.post(\"http://35.229.221.230:3000/comment/del\", {\n      _id: id\n    }).then(response => {\n      axios.get(\"http://35.229.221.230:3000/comment/list?filter=1\").then(response => {\n        const result = response.data.data;\n        console.log(result);\n        const action = changeHomeData(result);\n        dispatch(action);\n      });\n    });\n  };\n};","map":{"version":3,"sources":["C:/Users/chill/OneDrive/桌面/Project/myapp/src/pages/home/store/actionCreators.js"],"names":["axios","constants","fromJS","defaults","withCredentials","changeHomeData","result","type","CHANGE_HOME_DATA","articleList","recommendList","addHomeList","list","nextPage","ADD_HOME_LIST","changeScrollTopShow","CHANGE_SCROLL_TOP_SHOW","getMoreList","page","dispatch","get","then","response","data","console","log","action","toggleTopShow","show","TOGGLE_SCROLL_TOP","getHomeInfo","delArticle","id","post","_id"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,KAAKC,SAAZ,MAA2B,aAA3B;AACA,SAASC,MAAT,QAAuB,WAAvB;AAEAF,KAAK,CAACG,QAAN,CAAeC,eAAf,GAAiC,IAAjC;AAGA,OAAO,MAAMC,cAAc,GAAIC,MAAD,KAAa;AACzCC,EAAAA,IAAI,EAAEN,SAAS,CAACO,gBADyB;AAEzC;AACAC,EAAAA,WAAW,EAAEH,MAH4B;AAIzCI,EAAAA,aAAa,EAAEJ,MAAM,CAACI;AAJmB,CAAb,CAAvB;AAOP,OAAO,MAAMC,WAAW,GAAG,CAACC,IAAD,EAAMC,QAAN,MAAoB;AAC7CN,EAAAA,IAAI,EAAEN,SAAS,CAACa,aAD6B;AAE7CF,EAAAA,IAAI,EAAEV,MAAM,CAACU,IAAD,CAFiC;AAG7CC,EAAAA;AAH6C,CAApB,CAApB;AAMP,OAAO,MAAME,mBAAmB,GAAG,OAAO;AACxCR,EAAAA,IAAI,EAAEN,SAAS,CAACe;AADwB,CAAP,CAA5B;AAMP,OAAO,MAAMC,WAAW,GAAIC,IAAD,IAAU;AACnC,SAAQC,QAAD,IAAc;AACnBnB,IAAAA,KAAK,CAACoB,GAAN,CAAU,6BAA6BF,IAAvC,EAA6CG,IAA7C,CAAmDC,QAAD,IAAc;AAC9D,YAAMhB,MAAM,GAAGgB,QAAQ,CAACC,IAAT,CAAcA,IAA7B;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAYnB,MAAZ;AACA,YAAMoB,MAAM,GAAGf,WAAW,CAACL,MAAD,EAAQY,IAAI,GAAC,CAAb,CAA1B;AACAC,MAAAA,QAAQ,CAACO,MAAD,CAAR;AACD,KALD;AAMD,GAPD;AAQD,CATM;AAWP,OAAO,MAAMC,aAAa,GAAIC,IAAD,KAAW;AACtCrB,EAAAA,IAAI,EAAEN,SAAS,CAAC4B,iBADsB;AAEtCD,EAAAA;AAFsC,CAAX,CAAtB;AAMP,OAAO,MAAME,WAAW,GAAG,MAAM;AAC/B,SAAQX,QAAD,IAAc;AACfnB,IAAAA,KAAK,CAACoB,GAAN,CAAU,kDAAV,EACGC,IADH,CACSC,QAAD,IAAc;AAClBE,MAAAA,OAAO,CAACC,GAAR,CAAYH,QAAZ;AACA,YAAMhB,MAAM,GAAGgB,QAAQ,CAACC,IAAT,CAAcA,IAA7B;AACA,YAAMG,MAAM,GAAGrB,cAAc,CAACC,MAAD,CAA7B;AACAa,MAAAA,QAAQ,CAACO,MAAD,CAAR;AACD,KANH;AAOH,GARH;AASD,CAVM;AAYP,OAAO,MAAMK,UAAU,GAAIC,EAAD,IAAQ;AAChC,SAAQb,QAAD,IAAc;AACnBnB,IAAAA,KAAK,CAACG,QAAN,CAAeC,eAAf,GAAiC,IAAjC;AACAJ,IAAAA,KAAK,CAACiC,IAAN,CAAW,wCAAX,EAAqD;AACnDC,MAAAA,GAAG,EAACF;AAD+C,KAArD,EAEGX,IAFH,CAEQC,QAAQ,IAAI;AAClBtB,MAAAA,KAAK,CACFoB,GADH,CACO,kDADP,EAEGC,IAFH,CAESC,QAAD,IAAc;AAClB,cAAMhB,MAAM,GAAGgB,QAAQ,CAACC,IAAT,CAAcA,IAA7B;AACAC,QAAAA,OAAO,CAACC,GAAR,CAAYnB,MAAZ;AACA,cAAMoB,MAAM,GAAGrB,cAAc,CAACC,MAAD,CAA7B;AACAa,QAAAA,QAAQ,CAACO,MAAD,CAAR;AACD,OAPH;AAQD,KAXD;AAYD,GAdD;AAeD,CAhBM","sourcesContent":["import axios from \"axios\";\r\nimport * as constants from \"./constants\"\r\nimport { fromJS } from \"immutable\"\r\n\r\naxios.defaults.withCredentials = true;\r\n\r\n\r\nexport const changeHomeData = (result) => ({\r\n  type: constants.CHANGE_HOME_DATA,\r\n  // topicItem: result.topicItem,\r\n  articleList: result,\r\n  recommendList: result.recommendList,\r\n});\r\n\r\nexport const addHomeList = (list,nextPage) => ({\r\n  type: constants.ADD_HOME_LIST,\r\n  list: fromJS(list),\r\n  nextPage\r\n})\r\n\r\nexport const changeScrollTopShow = () => ({\r\n  type: constants.CHANGE_SCROLL_TOP_SHOW,\r\n})\r\n\r\n\r\n\r\nexport const getMoreList = (page) => {\r\n  return (dispatch) => {\r\n    axios.get(\"/api/homeList.json?page=\" + page).then((response) => {\r\n      const result = response.data.data;\r\n      console.log(result)\r\n      const action = addHomeList(result,page+1);\r\n      dispatch(action);\r\n    });\r\n  };\r\n}\r\n\r\nexport const toggleTopShow = (show) => ({\r\n  type: constants.TOGGLE_SCROLL_TOP,\r\n  show\r\n})\r\n\r\n\r\nexport const getHomeInfo = () => {\r\n  return (dispatch) => {\r\n        axios.get(\"http://35.229.221.230:3000/comment/list?filter=1\")\r\n          .then((response) => {\r\n            console.log(response);\r\n            const result = response.data.data;\r\n            const action = changeHomeData(result);\r\n            dispatch(action);\r\n          }); \r\n    }\r\n}\r\n\r\nexport const delArticle = (id) => {\r\n  return (dispatch) => {\r\n    axios.defaults.withCredentials = true;\r\n    axios.post(\"http://35.229.221.230:3000/comment/del\", {\r\n      _id:id,\r\n    }).then(response => {\r\n      axios\r\n        .get(\"http://35.229.221.230:3000/comment/list?filter=1\")\r\n        .then((response) => {\r\n          const result = response.data.data;\r\n          console.log(result);\r\n          const action = changeHomeData(result);\r\n          dispatch(action);\r\n        }); \r\n    })\r\n  }\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}