{"version":3,"sources":["pages/detail/style.js","pages/detail/index.js"],"names":["DetailWrapper","styled","div","Header","AuthorInfo","Content","Textarea","textarea","Button","Detail","to","pathname","this","props","login","account","title","content","imageUrl","username","editStatus","editArticle","changeDetailEditStatus","className","onClick","src","ref","dom","contentValue","match","params","id","value","backHome","getDetail","Component","connect","state","getIn","dispatch","actionCreators","changeDetailEditStatusAction","withRouter"],"mappings":"q6CAEO,IAAMA,EAAgBC,IAAOC,IAAV,KAObC,EAASF,IAAOC,IAAV,KAONE,EAAaH,IAAOC,IAAV,KAcVG,EAAUJ,IAAOC,IAAV,KAaPI,EAAWL,IAAOM,SAAV,KAeRC,EAASP,IAAOC,IAAV,K,8BClDbO,E,yKAGA,OACE,kBAAC,IAAD,CAAUC,GAAI,CAAEC,SAAU,S,+BAItB,IAAD,SAWHC,KAAKC,MATPC,EAFK,EAELA,MACAC,EAHK,EAGLA,QACAC,EAJK,EAILA,MACAC,EALK,EAKLA,QACAC,EANK,EAMLA,SACAC,EAPK,EAOLA,SACAC,EARK,EAQLA,WACAC,EATK,EASLA,YACAC,EAVK,EAULA,uBAQF,OACE,kBAACtB,EAAD,KACE,kBAACG,EAAD,KAASa,GAET,kBAACZ,EAAD,KACE,0BAAMmB,UAAU,YAAhB,UACA,0BAAMA,UAAU,YAAYJ,GAC3BL,GAASC,IAAYI,EACpB,0BACEI,UAAU,OACVC,QAAS,WACPF,EAAuB,KAH3B,4BAQE,MAGN,yBAAKG,IAAKP,IACM,IAAfE,EACC,kBAACd,EAAD,CACEoB,IAAK,SAACC,GACJ,EAAKC,aAAeD,IAGrBV,GACW,KACA,IAAfG,GAAgC,IAAdA,EAAiB,kBAACf,EAAD,KAC/BY,GACQ,KAGE,IAAdG,EACC,kBAACZ,EAAD,CACEgB,QAAS,WACPH,EAAY,EAAKR,MAAMgB,MAAMC,OAAOC,GAAI,EAAKH,aAAaI,OAC1DV,EAAuB,KAH3B,4BAQE,KACU,IAAbF,EAAgBR,KAAKqB,WAAY,Q,0CAKtCrB,KAAKC,MAAMqB,UAAUtB,KAAKC,MAAMgB,MAAMC,OAAOC,Q,GA1E5BI,aAsGNC,uBAvBS,SAACC,GAAD,MAAY,CAClCrB,MAAOqB,EAAMC,MAAM,CAAC,SAAU,UAC9BrB,QAASoB,EAAMC,MAAM,CAAC,SAAU,YAChCpB,SAAUmB,EAAMC,MAAM,CAAC,SAAU,aACjCnB,SAAUkB,EAAMC,MAAM,CAAC,SAAU,aACjClB,WAAYiB,EAAMC,MAAM,CAAC,SAAU,eACnCxB,MAAOuB,EAAMC,MAAM,CAAC,QAAS,UAC7BvB,QAASsB,EAAMC,MAAM,CAAC,QAAS,gBAGN,SAACC,GAAD,MAAe,CACxCL,UADwC,SAC9BH,GACRQ,EAASC,IAAeN,UAAUH,KAEpCV,YAJwC,SAI5BU,EAAId,GACdsB,EAASC,IAAenB,YAAYU,EAAId,KAE1CK,uBAPwC,SAOjBF,GACrBmB,EAASC,IAAeC,6BAA6BrB,QAK1CgB,CAA4CM,YAAWjC","file":"static/js/3.3f0a657e.chunk.js","sourcesContent":["import styled from \"styled-components\";\r\n\r\nexport const DetailWrapper = styled.div`\r\n  overflow: hidden;\r\n  width: 620px;\r\n  margin: 0 auto;\r\n  padding-bottom: 100px;\r\n`;\r\n\r\nexport const Header = styled.div`\r\n    margin:50px 0 20px 0;\r\n    font-size: 34px;\r\n    line-height:44px;\r\n    color:#333;\r\n    font-weight:bold;\r\n`\r\nexport const AuthorInfo = styled.div`\r\n  margin-bottom: 10px;\r\n  color: #999;\r\n  .iconfont,\r\n  .edit {\r\n    color: #ec6149;\r\n  }\r\n  .edit {\r\n    margin-left: 20px;\r\n    cursor: pointer;\r\n  }\r\n`;\r\n\r\n\r\nexport const Content = styled.div`\r\n  color: #2f2f2f;\r\n  margin: 20px 0;\r\n  font-size: 16px;\r\n  line-height: 30px;\r\n  img {\r\n    width: 100%;\r\n  }\r\n  p {\r\n    margin: 20px 0;\r\n  }\r\n`;\r\n\r\nexport const Textarea = styled.textarea`\r\n  width:99%;\r\n  height:600px;\r\n  color: #2f2f2f;\r\n  margin: 20px 0;\r\n  font-size: 16px;\r\n  line-height: 30px;\r\n  img {\r\n    width: 100%;\r\n  }\r\n  p {\r\n    margin: 20px 0;\r\n  }\r\n`;\r\n\r\nexport const Button = styled.div`\r\n  cursor: pointer;\r\n  width: 220px;\r\n  height: 30px;\r\n  line-height: 30px;\r\n  color: #fff;\r\n  background: #1cc283;\r\n  border-radius: 15px;\r\n  margin: 10px auto;\r\n  text-align: center;\r\n`;","import React, { Component } from \"react\";\r\nimport { DetailWrapper, Header, Content, Image, Textarea, Button, AuthorInfo } from \"./style\"\r\nimport { connect } from \"react-redux\"\r\nimport axios from \"axios\"\r\nimport { actionCreators } from \"./store\"\r\nimport { withRouter, Redirect } from \"react-router-dom\"\r\n\r\n\r\nclass Detail extends Component {\r\n  \r\n  backHome(){\r\n      return (\r\n        <Redirect to={{ pathname: \"/\"}} />\r\n      );\r\n    }\r\n\r\n  render() {\r\n    const {\r\n      login,\r\n      account,\r\n      title,\r\n      content,\r\n      imageUrl,\r\n      username,\r\n      editStatus,\r\n      editArticle,\r\n      changeDetailEditStatus,\r\n    } = this.props;\r\n\r\n    \r\n\r\n    \r\n   \r\n     \r\n    return (\r\n      <DetailWrapper>\r\n        <Header>{title}</Header>\r\n\r\n        <AuthorInfo>\r\n          <span className=\"iconfont\">&#xe624;</span>\r\n          <span className=\"username\">{username}</span>\r\n          {login && account === username ? (\r\n            <span\r\n              className=\"edit\"\r\n              onClick={() => {\r\n                changeDetailEditStatus(1);\r\n              }}\r\n            >\r\n              編輯文章\r\n            </span>\r\n          ) : null}\r\n        </AuthorInfo>\r\n\r\n        <img src={imageUrl} />\r\n        {editStatus === 1 ? (\r\n          <Textarea\r\n            ref={(dom) => {\r\n              this.contentValue = dom;\r\n            }}\r\n          >\r\n            {content}\r\n          </Textarea>): null}\r\n        {editStatus === 0||editStatus ===2? <Content /*dangerouslySetInnerHTML={ {__html: content} }*/>\r\n            {content}\r\n          </Content>:null }\r\n          \r\n        \r\n        {editStatus ===1? (\r\n          <Button\r\n            onClick={() => {\r\n              editArticle(this.props.match.params.id, this.contentValue.value);\r\n              changeDetailEditStatus(0)\r\n            }}\r\n          >\r\n            修改完成\r\n          </Button>\r\n        ) : null}\r\n        {editStatus===2? this.backHome(): null}\r\n      </DetailWrapper>     \r\n    );\r\n  }\r\n  componentDidMount() {\r\n    this.props.getDetail(this.props.match.params.id);\r\n    \r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  title: state.getIn([\"detail\", \"title\"]),\r\n  content: state.getIn([\"detail\", \"content\"]),\r\n  imageUrl: state.getIn([\"detail\", \"imageUrl\"]),\r\n  username: state.getIn([\"detail\", \"username\"]),\r\n  editStatus: state.getIn([\"detail\", \"editStatus\"]),\r\n  login: state.getIn([\"login\", \"login\"]),\r\n  account: state.getIn([\"login\", \"account\"]),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  getDetail(id) {\r\n    dispatch(actionCreators.getDetail(id))   \r\n  },\r\n  editArticle(id, content) {\r\n    dispatch(actionCreators.editArticle(id, content))\r\n  },\r\n  changeDetailEditStatus(editStatus) {\r\n    dispatch(actionCreators.changeDetailEditStatusAction(editStatus));\r\n  },\r\n})\r\n\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(withRouter(Detail));\r\n"],"sourceRoot":""}